# 微信小程序页面功能说明

## 1. 页面结构概览

微信小程序包含以下5个核心页面：
- 首页 (index)
- 登录页 (login) 
- 分类页 (category)
- 购物车 (cart)
- 个人中心 (user)

## 2. 页面详细功能

### 2.1 首页 (pages/index)

#### 功能描述
商城首页，展示商品推荐、活动信息等核心内容

#### 主要功能
- **轮播图**：展示主要活动和推广信息
- **商品分类导航**：快速进入各个商品分类
- **推荐商品**：热门商品、新品推荐等
- **营销活动**：秒杀、拼团、优惠券等活动入口
- **搜索功能**：商品搜索入口

#### 米色主题设计要点
- **轮播图**：使用柔和圆角设计，添加米色渐变遮罩增强视觉层次
- **分类导航**：采用米色系配色，圆形图标背景，温暖亲和
- **商品卡片**：浅米色背景，柔和阴影，圆角设计营造舒适感
- **标题文字**：使用深棕色(#8B7355)，提升可读性
- **价格显示**：使用强调色(#D4B896)突出显示
- **整体背景**：极浅米色(#FEFCF7)渐变，营造温馨氛围

#### 技术要点
- 使用Taro的Swiper组件实现轮播图
- 商品列表采用虚拟滚动优化性能
- 图片懒加载减少首屏加载时间
- 下拉刷新和上拉加载更多

#### 页面配置 (index.config.ts)
```typescript
export default {
  navigationBarTitleText: '商城首页',
  enablePullDownRefresh: true,
  onReachBottomDistance: 50
}
```

### 2.2 登录页 (pages/login)

#### 功能描述
用户登录页面，采用手机号验证码登录方式

#### 主要功能
- **手机号输入**：支持手机号格式验证
- **验证码发送**：发送短信验证码，包含倒计时功能
- **验证码验证**：验证用户输入的验证码
- **自动登录**：登录成功后保存用户信息
- **隐私协议**：用户协议和隐私政策确认

#### 米色主题设计要点
- **页面背景**：使用米色渐变背景，营造温暖舒适的登录环境
- **输入框设计**：圆角设计，米白色背景，深米色边框
- **登录按钮**：深米色渐变背景，圆角设计，柔和阴影效果
- **验证码按钮**：边框样式，米色边框，简洁优雅
- **Logo区域**：使用柔和阴影效果，增强品牌感
- **文字颜色**：主要文字使用深棕色，辅助文字使用中棕色

#### 技术要点
- 手机号正则验证：`/^1[3-9]\d{9}$/`
- 验证码倒计时：60秒倒计时，防止重复发送
- Token存储：登录成功后将token存储到本地
- 页面跳转：登录成功后返回上一页或跳转到首页

#### 接口设计
```typescript
// 发送验证码
POST /api/auth/send-sms
{
  phone: string
}

// 验证码登录
POST /api/auth/login
{
  phone: string,
  code: string
}
```

#### 页面配置 (login.config.ts)
```typescript
export default {
  navigationBarTitleText: '登录',
  navigationBarBackgroundColor: '#ffffff',
  navigationBarTextStyle: 'black'
}
```

### 2.3 分类页 (pages/category)

#### 功能描述
商品分类浏览页面，支持多级分类展示

#### 主要功能
- **分类导航**：左侧一级分类列表
- **商品展示**：右侧对应分类的商品列表
- **搜索功能**：分类内商品搜索
- **筛选排序**：价格、销量、评价等排序方式
- **商品预览**：商品卡片展示基本信息

#### 米色主题设计要点
- **左侧导航**：浅米色背景，选中状态使用深米色高亮
- **右侧商品区**：极浅米色背景，与左侧形成层次对比
- **商品卡片**：圆角设计，柔和阴影，米白色背景
- **筛选按钮**：米色边框样式，圆角设计
- **分类图标**：使用米色系配色，保持整体一致性

#### 技术要点
- 左右分栏布局，左侧固定宽度
- 分类数据缓存，减少重复请求
- 商品列表分页加载
- 筛选条件状态管理

#### 页面配置 (category.config.ts)
```typescript
export default {
  navigationBarTitleText: '商品分类',
  enablePullDownRefresh: true
}
```

### 2.4 购物车 (pages/cart)

#### 功能描述
购物车管理页面，支持商品数量修改、删除等操作

#### 主要功能
- **商品列表**：显示已添加的商品信息
- **数量调整**：增加/减少商品数量
- **商品删除**：移除购物车商品
- **全选功能**：批量选择商品
- **价格计算**：实时计算总价
- **结算功能**：跳转到订单确认页
- **优惠券**：可用优惠券展示和选择

#### 米色主题设计要点
- **商品卡片**：米白色背景，圆角设计，柔和边框
- **选择框**：深米色选中状态，圆角设计
- **数量调节**：圆形按钮设计，米色边框
- **结算栏**：渐变背景，突出显示总价和结算按钮
- **删除按钮**：柔和的红色调，与整体色调协调
- **价格文字**：使用强调色突出显示

#### 技术要点
- 购物车数据本地存储+服务端同步
- 商品库存实时校验
- 价格计算精度处理
- 滑动删除手势支持

#### 状态管理
```typescript
// Redux Toolkit Slice
interface CartState {
  items: CartItem[]
  selectedItems: string[]
  totalAmount: number
  totalCount: number
}
```

#### 页面配置 (cart.config.ts)
```typescript
export default {
  navigationBarTitleText: '购物车'
}
```

### 2.5 个人中心 (pages/user)

#### 功能描述
用户个人信息和功能入口页面

#### 主要功能
- **用户信息**：头像、昵称、手机号等基本信息
- **订单管理**：待付款、待发货、待收货、已完成订单
- **地址管理**：收货地址的增删改查
- **优惠券**：我的优惠券列表
- **积分余额**：积分和余额查询
- **客服联系**：在线客服或客服电话
- **设置功能**：账号设置、关于我们等
- **退出登录**：清除用户信息

#### 米色主题设计要点
- **头部区域**：米色渐变背景，营造温馨个人空间感
- **用户头像**：圆形设计，米色边框装饰
- **订单统计**：浅米色背景卡片，圆角设计
- **菜单项**：米白色背景，圆角分组，柔和分割线
- **图标设计**：使用深米色，保持视觉一致性
- **文字层次**：主要信息用深棕色，辅助信息用中棕色

#### 技术要点
- 用户信息缓存策略
- 订单状态实时更新
- 头像上传功能
- 登录状态检查

#### 页面配置 (user.config.ts)
```typescript
export default {
  navigationBarTitleText: '个人中心',
  navigationBarBackgroundColor: '#f8f8f8'
}
```

## 3. UI设计主题

### 3.1 米色柔和主题配色方案

**主色调：**
- 主色：`#F5F1E8` (米白色)
- 辅助色：`#E8DCC0` (浅米色)
- 强调色：`#D4B896` (深米色)
- 文字主色：`#8B7355` (深棕色)
- 文字辅助色：`#A68B5B` (中棕色)
- 背景色：`#FEFCF7` (极浅米色)

**设计原则：**
- 整体采用温暖柔和的米色系
- 圆角设计增加亲和力
- 适当留白营造舒适感
- 渐变效果增加层次感

### 3.2 全局样式配置

**src/styles/theme.scss**
```scss
// 主题色彩变量
$primary-color: #F5F1E8;
$secondary-color: #E8DCC0;
$accent-color: #D4B896;
$text-primary: #8B7355;
$text-secondary: #A68B5B;
$background-color: #FEFCF7;
$border-color: #E8DCC0;
$shadow-color: rgba(212, 184, 150, 0.2);

// 通用样式
.container {
  background-color: $background-color;
  color: $text-primary;
}

.card {
  background: linear-gradient(135deg, #FEFCF7 0%, #F5F1E8 100%);
  border-radius: 12px;
  box-shadow: 0 4px 12px $shadow-color;
  border: 1px solid $border-color;
}

.button-primary {
  background: linear-gradient(135deg, $accent-color 0%, #C9A876 100%);
  color: white;
  border-radius: 20px;
  border: none;
  box-shadow: 0 2px 8px rgba(212, 184, 150, 0.3);
}

.button-secondary {
  background: transparent;
  color: $accent-color;
  border: 1px solid $accent-color;
  border-radius: 20px;
}
```

## 4. 全局配置

### 4.1 应用配置 (app.config.ts)
```typescript
export default {
  pages: [
    'pages/index/index',
    'pages/login/index', 
    'pages/category/index',
    'pages/cart/index',
    'pages/user/index',
    'pages/product/index',
    'pages/order/list/index',
    'pages/order/detail/index',
    'pages/order/confirm/index'
  ],
  tabBar: {
    color: '#A68B5B',
    selectedColor: '#D4B896',
    backgroundColor: '#FEFCF7',
    borderStyle: 'white',
    list: [
      {
        pagePath: 'pages/index/index',
        text: '首页',
        iconPath: 'assets/images/tab-home.png',
        selectedIconPath: 'assets/images/tab-home-active.png'
      },
      {
        pagePath: 'pages/category/index',
        text: '分类',
        iconPath: 'assets/images/tab-category.png',
        selectedIconPath: 'assets/images/tab-category-active.png'
      },
      {
        pagePath: 'pages/cart/index',
        text: '购物车',
        iconPath: 'assets/images/tab-cart.png',
        selectedIconPath: 'assets/images/tab-cart-active.png'
      },
      {
        pagePath: 'pages/user/index',
        text: '我的',
        iconPath: 'assets/images/tab-user.png',
        selectedIconPath: 'assets/images/tab-user-active.png'
      }
    ]
  },
  window: {
    backgroundTextStyle: 'light',
    navigationBarBackgroundColor: '#F5F1E8',
    navigationBarTitleText: '商城',
    navigationBarTextStyle: 'black',
    backgroundColor: '#FEFCF7'
  }
}
```

### 3.2 权限配置
```typescript
// 需要登录的页面
const AUTH_PAGES = [
  'pages/cart/index',
  'pages/user/index',
  'pages/order/list/index',
  'pages/order/detail/index',
  'pages/order/confirm/index'
]

// 路由守卫
export const checkAuth = (url: string) => {
  const token = Taro.getStorageSync('token')
  if (AUTH_PAGES.some(page => url.includes(page)) && !token) {
    Taro.navigateTo({
      url: '/pages/login/index'
    })
    return false
  }
  return true
}
```

## 5. 开发优先级

### 第一阶段：核心功能
1. **登录页**：手机号验证码登录（最高优先级）
2. **首页**：基础商品展示
3. **个人中心**：基础用户信息展示

### 第二阶段：商品浏览
1. **分类页**：商品分类浏览
2. **商品详情页**：商品详细信息
3. **搜索功能**：商品搜索

### 第三阶段：购物流程
1. **购物车**：商品管理和结算
2. **订单确认**：下单流程
3. **订单管理**：订单状态跟踪

## 6. 技术实现要点

### 5.1 状态管理
- 使用Redux Toolkit管理全局状态
- 用户信息、购物车、商品分类等核心数据
- 持久化存储重要状态

### 5.2 网络请求
- 统一的请求拦截器处理token
- 错误处理和重试机制
- 请求缓存策略

### 5.3 性能优化
- 图片懒加载和压缩
- 分页加载和虚拟滚动
- 组件按需加载
- 缓存策略优化

### 5.4 用户体验
- 加载状态提示
- 错误页面处理
- 网络异常提示
- 操作反馈动画