# ç¯å¢ƒé…ç½®æ€»ç»“

## ï¿½ï¿½ å·²å®Œæˆçš„ç¯å¢ƒé…ç½®

### âœ… ç¯å¢ƒé…ç½®æ–‡ä»¶
- `.env.development` - å¼€å‘ç¯å¢ƒé…ç½®
- `.env.testing` - æµ‹è¯•ç¯å¢ƒé…ç½®  
- `.env.production` - ç”Ÿäº§ç¯å¢ƒé…ç½®

### âœ… é…ç½®åŠ è½½å™¨
- `src/config/configuration.ts` - ç»Ÿä¸€é…ç½®ç®¡ç†
- æ”¯æŒç¯å¢ƒå˜é‡ä¼˜å…ˆçº§
- ç±»å‹å®‰å…¨çš„é…ç½®è®¿é—®

### âœ… å¯åŠ¨è„šæœ¬
- `scripts/start-dev.sh` - å¼€å‘ç¯å¢ƒå¯åŠ¨
- `scripts/start-test.sh` - æµ‹è¯•ç¯å¢ƒå¯åŠ¨
- `scripts/start-prod.sh` - ç”Ÿäº§ç¯å¢ƒå¯åŠ¨

### âœ… NPMè„šæœ¬
- `npm run start:dev-env` - å¼€å‘ç¯å¢ƒ
- `npm run start:test-env` - æµ‹è¯•ç¯å¢ƒ
- `npm run start:prod-env` - ç”Ÿäº§ç¯å¢ƒ
- `npm run env:dev` - ä½¿ç”¨è„šæœ¬å¯åŠ¨å¼€å‘ç¯å¢ƒ
- `npm run env:test` - ä½¿ç”¨è„šæœ¬å¯åŠ¨æµ‹è¯•ç¯å¢ƒ
- `npm run env:prod` - ä½¿ç”¨è„šæœ¬å¯åŠ¨ç”Ÿäº§ç¯å¢ƒ

## ğŸ”§ ç¯å¢ƒå·®å¼‚å¯¹æ¯”

| é…ç½®é¡¹ | å¼€å‘ç¯å¢ƒ | æµ‹è¯•ç¯å¢ƒ | ç”Ÿäº§ç¯å¢ƒ |
|--------|----------|----------|----------|
| ç«¯å£ | 3000 | 3001 | 3000 |
| æ•°æ®åº“ | wechat_mall_dev | wechat_mall_test | wechat_mall_prod |
| Redis DB | 0 | 1 | 0 |
| æ—¥å¿—çº§åˆ« | debug | info | warn |
| è‡ªåŠ¨åŒæ­¥ | âœ… | âœ… | âŒ |
| SQLæ—¥å¿— | âœ… | âŒ | âŒ |
| APIæ–‡æ¡£ | âœ… | âœ… | âŒ |
| ç¼“å­˜æ—¶é—´ | 1å°æ—¶ | 30åˆ†é’Ÿ | 2å°æ—¶ |
| å¯†ç é•¿åº¦ | 6ä½ | 6ä½ | 8ä½ |
| åŠ å¯†è½®æ•° | 10 | 8 | 12 |

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### å¼€å‘ç¯å¢ƒ
```bash
# æ–¹æ³•1: ç›´æ¥ä½¿ç”¨NPMè„šæœ¬
npm run start:dev-env

# æ–¹æ³•2: ä½¿ç”¨å¯åŠ¨è„šæœ¬
npm run env:dev

# æ–¹æ³•3: æ‰‹åŠ¨è®¾ç½®ç¯å¢ƒå˜é‡
NODE_ENV=development npm run start:dev
```

### æµ‹è¯•ç¯å¢ƒ
```bash
# æ–¹æ³•1: ç›´æ¥ä½¿ç”¨NPMè„šæœ¬
npm run start:test-env

# æ–¹æ³•2: ä½¿ç”¨å¯åŠ¨è„šæœ¬
npm run env:test

# æ–¹æ³•3: æ‰‹åŠ¨è®¾ç½®ç¯å¢ƒå˜é‡
NODE_ENV=testing npm run start:dev
```

### ç”Ÿäº§ç¯å¢ƒ
```bash
# æ–¹æ³•1: ç›´æ¥ä½¿ç”¨NPMè„šæœ¬
npm run start:prod-env

# æ–¹æ³•2: ä½¿ç”¨å¯åŠ¨è„šæœ¬
npm run env:prod

# æ–¹æ³•3: æ‰‹åŠ¨è®¾ç½®ç¯å¢ƒå˜é‡
NODE_ENV=production npm run start:dev
```

## ğŸ“Š é…ç½®éªŒè¯

### æ£€æŸ¥å½“å‰ç¯å¢ƒ
```bash
# æŸ¥çœ‹ç¯å¢ƒå˜é‡
echo $NODE_ENV

# æŸ¥çœ‹åŠ è½½çš„é…ç½®æ–‡ä»¶
ls -la .env.*
```

### æµ‹è¯•é…ç½®åŠ è½½
```bash
# å¼€å‘ç¯å¢ƒ
NODE_ENV=development node -e "console.log(require('./src/config/configuration').default())"

# æµ‹è¯•ç¯å¢ƒ
NODE_ENV=testing node -e "console.log(require('./src/config/configuration').default())"

# ç”Ÿäº§ç¯å¢ƒ
NODE_ENV=production node -e "console.log(require('./src/config/configuration').default())"
```

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

1. **ç”Ÿäº§ç¯å¢ƒé…ç½®**
   - ä¸è¦å°†ç”Ÿäº§ç¯å¢ƒçš„æ•æ„Ÿä¿¡æ¯æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
   - ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†æœåŠ¡
   - å®šæœŸè½®æ¢å¯†é’¥å’Œå¯†ç 

2. **æ•°æ®åº“éš”ç¦»**
   - ç¡®ä¿ä¸åŒç¯å¢ƒä½¿ç”¨ç‹¬ç«‹çš„æ•°æ®åº“
   - å®šæœŸå¤‡ä»½ç”Ÿäº§æ•°æ®
   - ç›‘æ§æ•°æ®åº“æ€§èƒ½

3. **Rediséš”ç¦»**
   - ä½¿ç”¨ä¸åŒçš„æ•°æ®åº“ç¼–å·éš”ç¦»æ•°æ®
   - è®¾ç½®åˆé€‚çš„è¿‡æœŸæ—¶é—´
   - ç›‘æ§å†…å­˜ä½¿ç”¨

## ğŸ“ˆ ç›‘æ§å’Œç»´æŠ¤

### å¼€å‘ç¯å¢ƒ
- è¯¦ç»†æ—¥å¿—è¾“å‡º
- çƒ­é‡è½½æ”¯æŒ
- è°ƒè¯•å·¥å…·é›†æˆ

### æµ‹è¯•ç¯å¢ƒ
- è‡ªåŠ¨åŒ–æµ‹è¯•
- æ€§èƒ½æµ‹è¯•
- é›†æˆæµ‹è¯•

### ç”Ÿäº§ç¯å¢ƒ
- ç›‘æ§æŒ‡æ ‡æ”¶é›†
- è‡ªåŠ¨å¤‡ä»½
- å‘Šè­¦é€šçŸ¥

## ğŸ‰ é…ç½®å®Œæˆ

âœ… **å¤šç¯å¢ƒé…ç½®ç³»ç»Ÿå·²å®Œå…¨è®¾ç½®å®Œæˆï¼**

ç°åœ¨æ‚¨å¯ä»¥ï¼š
- è½»æ¾åˆ‡æ¢ä¸åŒç¯å¢ƒ
- ä½¿ç”¨ä¸åŒçš„æ•°æ®åº“å’ŒRedisé…ç½®
- æ ¹æ®ç¯å¢ƒè°ƒæ•´å®‰å…¨è®¾ç½®
- çµæ´»ç®¡ç†æ—¥å¿—å’Œç›‘æ§

---

**ä¸‹ä¸€æ­¥å»ºè®®ï¼š**
1. é…ç½®MySQLæ•°æ®åº“è¿æ¥
2. å®Œå–„ä¸šåŠ¡é€»è¾‘å®ç°
3. æ·»åŠ æ•°æ®éªŒè¯å’ŒDTO
4. å®ç°å®Œæ•´çš„RBACæƒé™ç³»ç»Ÿ
