# 微信小程序商城项目结构示例

## 1. 整体项目结构

```
wechat-mall/
├── miniprogram/                 # 微信小程序端
├── admin-web/                   # 后台管理系统
├── server/                      # 后端服务
├── docs/                        # 项目文档
├── docker/                      # Docker配置
├── scripts/                     # 构建脚本
└── README.md
```

## 2. 微信小程序端结构 (Taro)

```
miniprogram/
├── src/
│   ├── pages/                   # 页面文件
│   │   ├── index/               # 首页
│   │   │   ├── index.tsx
│   │   │   ├── index.config.ts
│   │   │   └── index.scss
│   │   ├── login/               # 登录页（手机号验证码）
│   │   │   ├── index.tsx
│   │   │   ├── index.config.ts
│   │   │   └── index.scss
│   │   ├── category/            # 分类页
│   │   │   ├── index.tsx
│   │   │   ├── index.config.ts
│   │   │   └── index.scss
│   │   ├── cart/                # 购物车
│   │   │   ├── index.tsx
│   │   │   ├── index.config.ts
│   │   │   └── index.scss
│   │   ├── user/                # 个人中心
│   │   │   ├── index.tsx
│   │   │   ├── index.config.ts
│   │   │   └── index.scss
│   │   ├── product/             # 商品详情
│   │   │   ├── index.tsx
│   │   │   ├── index.config.ts
│   │   │   └── index.scss
│   │   ├── order/               # 订单相关
│   │   │   ├── list/            # 订单列表
│   │   │   ├── detail/          # 订单详情
│   │   │   └── confirm/         # 订单确认
│   │   └── payment/             # 支付页面
│   ├── components/              # 自定义组件
│   │   ├── ProductCard/         # 商品卡片
│   │   │   ├── index.tsx
│   │   │   └── index.scss
│   │   ├── AddressPicker/       # 地址选择器
│   │   ├── CouponSelector/      # 优惠券选择
│   │   └── Loading/             # 加载组件
│   ├── utils/                   # 工具函数
│   │   ├── request.ts           # 网络请求封装
│   │   ├── auth.ts              # 认证相关
│   │   ├── storage.ts           # 本地存储
│   │   ├── format.ts            # 格式化工具
│   │   └── constants.ts         # 常量定义
│   ├── store/                   # 状态管理 (Redux Toolkit)
│   │   ├── index.ts             # store配置
│   │   ├── slices/
│   │   │   ├── userSlice.ts     # 用户状态
│   │   │   ├── cartSlice.ts     # 购物车状态
│   │   │   └── productSlice.ts  # 商品状态
│   │   └── hooks.ts             # 类型化hooks
│   ├── styles/                  # 全局样式
│   │   ├── common.scss          # 通用样式
│   │   ├── variables.scss       # 样式变量
│   │   └── mixins.scss          # 样式混入
│   ├── assets/                  # 静态资源
│   │   └── images/              # 图片资源
│   ├── types/                   # TypeScript类型定义
│   │   ├── api.ts               # API类型
│   │   ├── user.ts              # 用户类型
│   │   └── product.ts           # 商品类型
│   ├── app.tsx                  # 应用入口
│   ├── app.config.ts            # 应用配置
│   └── app.scss                 # 全局样式
├── config/                      # 构建配置
│   ├── index.js                 # 主配置
│   ├── dev.js                   # 开发环境
│   └── prod.js                  # 生产环境
├── package.json                 # 依赖配置
├── tsconfig.json                # TypeScript配置
├── babel.config.js              # Babel配置
├── .eslintrc.js                 # ESLint配置
└── project.config.json          # 小程序项目配置
```

## 3. 后台管理系统结构 (Vue-Vben-Admin)

```
admin-web/
├── public/                      # 静态资源
│   ├── index.html
│   ├── favicon.ico
│   └── resource/                # 公共资源
├── src/
│   ├── api/                     # API接口
│   │   ├── sys/                 # 系统相关API
│   │   │   ├── user.ts
│   │   │   ├── menu.ts
│   │   │   └── role.ts
│   │   ├── mall/                # 商城相关API
│   │   │   ├── product.ts
│   │   │   ├── order.ts
│   │   │   ├── category.ts
│   │   │   └── user.ts
│   │   └── model/               # API类型定义
│   │       ├── baseModel.ts
│   │       ├── userModel.ts
│   │       └── productModel.ts
│   ├── assets/                  # 静态资源
│   │   ├── images/
│   │   ├── icons/
│   │   └── svg/
│   ├── components/              # 公共组件
│   │   ├── Application/         # 应用组件
│   │   ├── Button/              # 按钮组件
│   │   ├── Form/                # 表单组件
│   │   ├── Table/               # 表格组件
│   │   ├── Modal/               # 弹窗组件
│   │   ├── Upload/              # 上传组件
│   │   ├── Icon/                # 图标组件
│   │   └── Drawer/              # 抽屉组件
│   ├── views/                   # 页面组件
│   │   ├── dashboard/           # 仪表盘
│   │   │   ├── analysis/        # 分析页
│   │   │   └── workbench/       # 工作台
│   │   ├── mall/                # 商城管理
│   │   │   ├── product/         # 商品管理
│   │   │   │   ├── index.vue    # 商品列表
│   │   │   │   ├── detail.vue   # 商品详情
│   │   │   │   └── category.vue # 分类管理
│   │   │   ├── order/           # 订单管理
│   │   │   │   ├── index.vue    # 订单列表
│   │   │   │   └── detail.vue   # 订单详情
│   │   │   ├── user/            # 用户管理
│   │   │   │   └── index.vue
│   │   │   └── marketing/       # 营销管理
│   │   │       ├── coupon.vue   # 优惠券
│   │   │       └── activity.vue # 活动管理
│   │   ├── sys/                 # 系统管理
│   │   │   ├── account/         # 账号管理
│   │   │   ├── role/            # 角色管理
│   │   │   ├── menu/            # 菜单管理
│   │   │   └── dept/            # 部门管理
│   │   └── sys/                 # 系统页面
│   │       ├── login/           # 登录页
│   │       ├── lock/            # 锁屏页
│   │       └── exception/       # 异常页
│   ├── router/                  # 路由配置
│   │   ├── index.ts             # 路由入口
│   │   ├── routes/              # 路由模块
│   │   │   ├── basic.ts         # 基础路由
│   │   │   ├── modules/         # 业务路由模块
│   │   │   │   ├── dashboard.ts
│   │   │   │   ├── mall.ts
│   │   │   │   └── system.ts
│   │   ├── guard/               # 路由守卫
│   │   │   ├── index.ts
│   │   │   ├── permissionGuard.ts
│   │   │   └── stateGuard.ts
│   │   ├── helper/              # 路由辅助
│   │   └── types.ts             # 路由类型
│   ├── store/                   # 状态管理 (Pinia)
│   │   ├── index.ts             # store入口
│   │   └── modules/             # store模块
│   │       ├── app.ts           # 应用状态
│   │       ├── user.ts          # 用户状态
│   │       ├── permission.ts    # 权限状态
│   │       ├── multipleTab.ts   # 多标签状态
│   │       └── locale.ts        # 国际化状态
│   ├── layouts/                 # 布局组件
│   │   ├── default/             # 默认布局
│   │   ├── iframe/              # iframe布局
│   │   └── page/                # 页面布局
│   ├── hooks/                   # 组合式函数
│   │   ├── web/                 # web相关hooks
│   │   ├── setting/             # 设置相关hooks
│   │   └── core/                # 核心hooks
│   ├── utils/                   # 工具函数
│   │   ├── http/                # HTTP请求
│   │   │   ├── axios/           # axios配置
│   │   │   └── index.ts
│   │   ├── auth/                # 认证工具
│   │   ├── cache/               # 缓存工具
│   │   ├── file/                # 文件工具
│   │   ├── helper/              # 辅助工具
│   │   └── index.ts
│   ├── design/                  # 样式设计
│   │   ├── index.less           # 主样式
│   │   ├── var/                 # 变量
│   │   ├── color.less           # 颜色
│   │   └── theme.less           # 主题
│   ├── locales/                 # 国际化
│   │   ├── lang/                # 语言包
│   │   │   ├── zh_CN.ts         # 中文
│   │   │   └── en.ts            # 英文
│   │   └── index.ts
│   ├── settings/                # 项目配置
│   │   ├── projectSetting.ts    # 项目设置
│   │   ├── encryptionSetting.ts # 加密设置
│   │   └── designSetting.ts     # 设计设置
│   ├── enums/                   # 枚举定义
│   │   ├── appEnum.ts
│   │   ├── httpEnum.ts
│   │   └── menuEnum.ts
│   ├── types/                   # 类型定义
│   │   ├── global.d.ts          # 全局类型
│   │   ├── config.d.ts          # 配置类型
│   │   └── module.d.ts          # 模块类型
│   ├── App.vue                  # 根组件
│   └── main.ts                  # 入口文件
├── types/                       # 全局类型定义
├── build/                       # 构建相关
│   ├── vite/                    # vite配置
│   ├── script/                  # 构建脚本
│   └── config/                  # 构建配置
├── mock/                        # mock数据
├── package.json                 # 依赖配置
├── vite.config.ts              # Vite配置
├── tsconfig.json               # TypeScript配置
├── .env                        # 环境变量
├── .env.development            # 开发环境变量
├── .env.production             # 生产环境变量
├── .eslintrc.js                # ESLint配置
├── .prettierrc.js              # Prettier配置
└── README.md
```

## 4. 后端服务结构 (NestJS + TypeScript)

```
server/
├── src/
│   ├── modules/                 # 功能模块
│   │   ├── auth/                # 认证模块
│   │   │   ├── auth.controller.ts
│   │   │   ├── auth.service.ts
│   │   │   ├── auth.module.ts
│   │   │   ├── dto/             # 数据传输对象
│   │   │   │   ├── login.dto.ts
│   │   │   │   └── register.dto.ts
│   │   │   ├── guards/          # 守卫
│   │   │   │   ├── jwt-auth.guard.ts
│   │   │   │   └── local-auth.guard.ts
│   │   │   ├── strategies/      # 策略
│   │   │   │   ├── jwt.strategy.ts
│   │   │   │   └── local.strategy.ts
│   │   │   └── interfaces/      # 接口定义
│   │   ├── user/                # 用户模块
│   │   │   ├── user.controller.ts
│   │   │   ├── user.service.ts
│   │   │   ├── user.module.ts
│   │   │   ├── entities/        # 实体
│   │   │   │   └── user.entity.ts
│   │   │   ├── dto/
│   │   │   │   ├── create-user.dto.ts
│   │   │   │   └── update-user.dto.ts
│   │   │   └── interfaces/
│   │   ├── product/             # 商品模块
│   │   │   ├── product.controller.ts
│   │   │   ├── product.service.ts
│   │   │   ├── product.module.ts
│   │   │   ├── entities/
│   │   │   │   ├── product.entity.ts
│   │   │   │   └── category.entity.ts
│   │   │   ├── dto/
│   │   │   │   ├── create-product.dto.ts
│   │   │   │   ├── update-product.dto.ts
│   │   │   │   └── query-product.dto.ts
│   │   │   └── interfaces/
│   │   ├── order/               # 订单模块
│   │   │   ├── order.controller.ts
│   │   │   ├── order.service.ts
│   │   │   ├── order.module.ts
│   │   │   ├── entities/
│   │   │   │   ├── order.entity.ts
│   │   │   │   └── order-item.entity.ts
│   │   │   ├── dto/
│   │   │   │   ├── create-order.dto.ts
│   │   │   │   └── update-order.dto.ts
│   │   │   └── interfaces/
│   │   ├── payment/             # 支付模块
│   │   │   ├── payment.controller.ts
│   │   │   ├── payment.service.ts
│   │   │   ├── payment.module.ts
│   │   │   ├── entities/
│   │   │   │   └── payment.entity.ts
│   │   │   ├── dto/
│   │   │   └── interfaces/
│   │   ├── wechat/              # 微信模块
│   │   │   ├── wechat.controller.ts
│   │   │   ├── wechat.service.ts
│   │   │   ├── wechat.module.ts
│   │   │   └── interfaces/
│   │   └── upload/              # 文件上传模块
│   │       ├── upload.controller.ts
│   │       ├── upload.service.ts
│   │       └── upload.module.ts
│   ├── common/                  # 公共模块
│   │   ├── decorators/          # 装饰器
│   │   │   ├── auth.decorator.ts
│   │   │   ├── user.decorator.ts
│   │   │   └── roles.decorator.ts
│   │   ├── filters/             # 异常过滤器
│   │   │   ├── http-exception.filter.ts
│   │   │   └── all-exceptions.filter.ts
│   │   ├── guards/              # 守卫
│   │   │   ├── roles.guard.ts
│   │   │   └── throttler.guard.ts
│   │   ├── interceptors/        # 拦截器
│   │   │   ├── transform.interceptor.ts
│   │   │   ├── logging.interceptor.ts
│   │   │   └── timeout.interceptor.ts
│   │   ├── pipes/               # 管道
│   │   │   ├── validation.pipe.ts
│   │   │   └── parse-int.pipe.ts
│   │   ├── middleware/          # 中间件
│   │   │   ├── logger.middleware.ts
│   │   │   └── cors.middleware.ts
│   │   ├── dto/                 # 公共DTO
│   │   │   ├── pagination.dto.ts
│   │   │   └── response.dto.ts
│   │   ├── interfaces/          # 公共接口
│   │   │   ├── response.interface.ts
│   │   │   └── pagination.interface.ts
│   │   ├── enums/               # 枚举
│   │   │   ├── role.enum.ts
│   │   │   ├── status.enum.ts
│   │   │   └── order-status.enum.ts
│   │   └── constants/           # 常量
│   │       ├── app.constants.ts
│   │       └── redis.constants.ts
│   ├── config/                  # 配置
│   │   ├── database.config.ts   # 数据库配置
│   │   ├── redis.config.ts      # Redis配置
│   │   ├── jwt.config.ts        # JWT配置
│   │   ├── wechat.config.ts     # 微信配置
│   │   ├── upload.config.ts     # 上传配置
│   │   └── app.config.ts        # 应用配置
│   ├── database/                # 数据库相关
│   │   ├── migrations/          # 数据库迁移
│   │   ├── seeds/               # 数据填充
│   │   └── database.providers.ts
│   ├── utils/                   # 工具函数
│   │   ├── crypto.util.ts       # 加密工具
│   │   ├── date.util.ts         # 日期工具
│   │   ├── file.util.ts         # 文件工具
│   │   ├── validation.util.ts   # 验证工具
│   │   └── response.util.ts     # 响应工具
│   ├── app.controller.ts        # 应用控制器
│   ├── app.service.ts           # 应用服务
│   ├── app.module.ts            # 应用模块
│   └── main.ts                  # 应用入口
├── test/                        # 测试文件
│   ├── app.e2e-spec.ts         # E2E测试
│   ├── jest-e2e.json           # E2E测试配置
│   └── __mocks__/               # 模拟数据
├── docs/                        # 文档
│   ├── api/                     # API文档
│   └── README.md
├── dist/                        # 编译输出
├── uploads/                     # 上传文件
├── logs/                        # 日志文件
├── package.json                 # 依赖配置
├── tsconfig.json                # TypeScript配置
├── tsconfig.build.json          # 构建TypeScript配置
├── nest-cli.json                # NestJS CLI配置
├── .env                         # 环境变量
├── .env.example                 # 环境变量示例
├── .eslintrc.js                 # ESLint配置
├── .prettierrc                  # Prettier配置
├── .gitignore
└── README.md
```

## 5. Docker配置结构

```
docker/
├── nginx/                       # Nginx配置
│   ├── nginx.conf
│   └── default.conf
├── mysql/                       # MySQL配置
│   ├── my.cnf
│   └── init.sql
├── redis/                       # Redis配置
│   └── redis.conf
├── Dockerfile.server            # 后端服务镜像
├── Dockerfile.admin             # 管理后台镜像
└── docker-compose.yml           # 容器编排
```

## 6. 核心文件示例

### 6.1 小程序请求封装 (miniprogram/utils/request.js)

```javascript
const BASE_URL = 'https://api.example.com/v1'

class Request {
  constructor() {
    this.baseURL = BASE_URL
    this.timeout = 10000
  }

  request(options) {
    return new Promise((resolve, reject) => {
      const token = wx.getStorageSync('token')
      
      wx.request({
        url: this.baseURL + options.url,
        method: options.method || 'GET',
        data: options.data || {},
        header: {
          'Content-Type': 'application/json',
          'Authorization': token ? `Bearer ${token}` : '',
          ...options.header
        },
        timeout: this.timeout,
        success: (res) => {
          if (res.statusCode === 200) {
            resolve(res.data)
          } else {
            reject(res)
          }
        },
        fail: reject
      })
    })
  }

  get(url, data) {
    return this.request({ url, method: 'GET', data })
  }

  post(url, data) {
    return this.request({ url, method: 'POST', data })
  }
}

module.exports = new Request()
```

### 6.2 后端路由示例 (server/src/routes/product.js)

```javascript
const express = require('express')
const router = express.Router()
const productController = require('../controllers/product')
const auth = require('../middleware/auth')

// 获取商品列表
router.get('/', productController.getProducts)

// 获取商品详情
router.get('/:id', productController.getProductById)

// 搜索商品
router.get('/search', productController.searchProducts)

// 创建商品 (需要管理员权限)
router.post('/', auth.requireAdmin, productController.createProduct)

// 更新商品
router.put('/:id', auth.requireAdmin, productController.updateProduct)

// 删除商品
router.delete('/:id', auth.requireAdmin, productController.deleteProduct)

module.exports = router
```

### 6.3 数据库模型示例 (server/src/models/Product.js)

```javascript
const { DataTypes } = require('sequelize')
const sequelize = require('../utils/database')

const Product = sequelize.define('Product', {
  id: {
    type: DataTypes.BIGINT,
    primaryKey: true,
    autoIncrement: true
  },
  name: {
    type: DataTypes.STRING(255),
    allowNull: false
  },
  description: {
    type: DataTypes.TEXT
  },
  categoryId: {
    type: DataTypes.BIGINT,
    field: 'category_id'
  },
  price: {
    type: DataTypes.DECIMAL(10, 2),
    allowNull: false
  },
  stock: {
    type: DataTypes.INTEGER,
    defaultValue: 0
  },
  images: {
    type: DataTypes.JSON
  },
  status: {
    type: DataTypes.TINYINT,
    defaultValue: 1
  }
}, {
  tableName: 'products',
  timestamps: true,
  createdAt: 'created_at',
  updatedAt: 'updated_at'
})

module.exports = Product
```

## 7. 开发环境配置

### 7.1 环境变量配置 (.env.development)

```env
# 数据库配置
DB_HOST=localhost
DB_PORT=3306
DB_NAME=wechat_mall
DB_USER=root
DB_PASSWORD=password

# Redis配置
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# 微信配置
WECHAT_APP_ID=your_app_id
WECHAT_APP_SECRET=your_app_secret
WECHAT_MCH_ID=your_mch_id
WECHAT_API_KEY=your_api_key

# JWT配置
JWT_SECRET=your_jwt_secret
JWT_EXPIRES_IN=7d

# 文件上传
UPLOAD_PATH=./uploads
MAX_FILE_SIZE=5MB
```

### 7.2 Docker Compose配置

```yaml
version: '3.8'

services:
  mysql:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: password
      MYSQL_DATABASE: wechat_mall
    ports:
      - "3306:3306"
    volumes:
      - mysql_data:/var/lib/mysql
      - ./docker/mysql/init.sql:/docker-entrypoint-initdb.d/init.sql

  redis:
    image: redis:6.2
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

  server:
    build:
      context: .
      dockerfile: docker/Dockerfile.server
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=development
    depends_on:
      - mysql
      - redis
    volumes:
      - ./server:/app
      - /app/node_modules

  admin:
    build:
      context: .
      dockerfile: docker/Dockerfile.admin
    ports:
      - "8080:80"
    depends_on:
      - server

volumes:
  mysql_data:
  redis_data:
```

这个项目结构示例展示了一个完整的微信小程序商城项目的代码组织方式，包含了前端、后端、数据库、部署等各个方面的文件结构和配置示例。