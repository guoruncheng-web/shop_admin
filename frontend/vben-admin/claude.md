# 电商后台管理系统(多商户)
## 商户分类
1. 平台超级商户
2. 普通商户
2.1 二者区别:平台商户多了一个多商户管理权限,可以对普通商户进行管理
## 登录模块
1. 采用token模式登录,登录后,后端返回token给前端在localStorage进行保存,然后当用户请求其他接口的时候后端会去刷新token的有效期
2. 登录后,profile接口返回了用户信息(个人基本信息,角色,角色所拥有的菜单,商户信息等)
3. 前端根据返回的menus菜单信息在路由中渲染可见的页面
4. 前端根据返回的menus中类型=按钮的菜单,获取到按钮级别的菜单的权限标识去渲染页面中可见的按钮,前端通过自定义指令来处理按钮的显示与隐藏
5. 当登录过期后,前端拦截请求跳转到登录页面
## 权限模块
1. 数据库表为menus
2. 登录账号的时候,/auth/profile接口返回所属角色的菜单数据,后端要对菜单数据进行过滤保证唯一性
3. 菜单分为三个级别, 目录级别, 菜单级别, 按钮级别
4. 目录级别, 菜单级别 显示到前端的侧边栏里面
5. 菜单级别和按钮级别需要设置权限标识,权限标识需要保证全局唯一性
6. 当访问没有权限的接口的时候,后端应该报错返回错误信息给前端,你当前没有操作权限
7. 设置按钮权限的权限标识就是为了给前端的全局自定义指令来实现隐藏和显示按钮,/auth/profile返回账号所用户的权限标识,前端通过store储存起来,然后前端通过全局自定义指令在页面的按钮代码实现按钮的显示与隐藏
# 日志管理
1. 包括登录日志和操作日志
2. 这个模块只有平台商户才拥有的权限,/login-logs和operation-logs接口应该返回所属的商户的信息,前端也应该展示商户信息
3. 操作日志显示字段
- ID 操作用户 所属模块 操作类型 操作描述 所属商户 请求方法 请求路径 IP地址 操作地点 执行时间 操作状态 操作时间
4. 登录日志显示字段
- ID 登录用户 登录方式 IP地址 登录地点 设备信息 登录状态 登录时间 退出时间 所属商户
5. 操作日志和登录日志均要支持所属商户的搜索